# 🎓 SITP-German-AI-Agent 教师端后台操作手册
> **项目名称**：AI 智能体辅助大学德语个性化学习系统 **适用对象**：德语教师、SITP 项目组研究人员、教学督导 **文档版本**：v1.1  **最后更新**：2026-02-14

## 📖 目录 (Table of Contents)
[TOC]

## 1. 前言：三元协同教学理念

本系统不仅仅是一个管理后台，它是 **“教师 - 学生 - AI智能体”** 三元结构的中枢。

- **传统二元结构**：教师 <-> 学生（互动频率低，难以兼顾个体）。
- **本系统三元结构**：
  1. **学生 <-> AI**：高频互动，完成基础语言操练。
  2. **教师 <-> AI**：教师通过后台指令 AI 调整教学策略（如发布特定情景）。
  3. **教师** <-> **数据**：教师通过后台查看 AI 反馈的学情数据，进行精准教学。

## 2. 快速入门

### 2.1 系统登录

- **访问地址**：

  - 本地开发环境：`http://localhost:5173/teacher/login`

- **账号权限**：

  - **教师 (Teacher)**：可查看和管理自己班级的学生数据。

- **登录界面**： 输入分配的 `工号/用户名` 和 `密码`。

  > ⚠️ **注意**：若忘记密码，请直接联系项目组技术负责人重置数据库，暂不支持自助找回。

### 2.2 界面导航概览

登录成功后，屏幕左侧为**主导航栏 (Sidebar)**，包含以下核心入口：

1. **Dashboard (仪表盘)**：首页，查看宏观数据。
2. **Students (学生管理)**：班级花名册与详细档案。
3. **Scenarios (情景发布)**：配置 AI 对话任务。
4. **Exams (试卷生成)**：AI 辅助出题工具。
5. **Settings (设置)**：修改密码与个人信息。

## 3. 功能模块深度解析

### 3.1 教学仪表盘 (Dashboard) - 全局学情监控

这是您登录后看到的第一个页面，用于快速判断“班级最近的学习状态如何”。

#### A. 核心指标卡片 (KPI Cards)

- **活跃学生数 (Active Students)**：
  - *定义*：过去 24 小时内至少与 AI 进行过 1 轮对话的学生。
  - *教学意义*：若低于班级人数的 50%，说明需要并在课堂上提醒学生使用。
- **平均对话时长 (Avg. Duration)**：
  - *定义*：全班学生今日累计对话分钟数 / 活跃人数。
  - *基准*：建议维持在 15-20 分钟/人/天。
- **作业提交率 (Completion Rate)**：
  - *定义*：当前生效的情景任务已完成人数百分比。

#### B. 能力雷达图 (Competence Radar)

系统依据 AI 对学生对话日志的分析，自动在四个维度打分（0-100）：

- **Wortschatz (词汇)**：使用的词汇丰富度、准确度。
- **Grammatik (语法)**：变格、变位、句法结构的正确率。
- **Hören (听力)**：(基于 STT 识别延迟和重听次数估算) 对 AI 语音的反应速度。
- **Sprechen (口语)**：(基于语音识别置信度) 发音的标准程度。

> **💡 操作技巧**：将鼠标悬停在雷达图的某个顶点上，可查看具体的班级平均分数值。

### 3.2 学生详情 (Student Detail) - 个性化诊断

**路径**：点击仪表盘下方的“学生列表” -> 选择具体学生姓名。

此页面是实施**个性化教学 (Personalized Teaching)** 的关键。

#### A. 学习轨迹图

- 展示该学生近 7 天的学习时长曲线。
- **异常识别**：如果曲线突然归零，可能学生遇到了困难或懈怠，需要谈话介入。

#### B. 错题本透视 (Error Analysis)

AI 会自动从学生的对话和练习中提取高频错误。

- **高频词汇错误**：显示学生反复拼写错误或误用的单词。
- **语法薄弱点**：例如 `Dativ/Akkusativ` 混淆、`Adjektivendung` (形容词词尾) 错误。
- **教师干预**：点击“**Push Exercise**”按钮，可针对该薄弱点，让 AI 在下次对话中刻意多使用此类语法结构，强制学生练习。

#### C. 对话日志审计 (Chat Audit)

- 您可以查看学生与 AI 的最近 10 条对话记录。
- **目的**：检查学生是否在“糊弄”AI（如只回复 Ja/Nein），或者 AI 是否出现了幻觉（Hallucination）。

### 3.3 情景任务发布 (Scenario Launch) - 教学干预

**路径**：侧边栏 `Scenarios`

此功能用于控制学生端的 `AISceneChat` 模块，实现“全班统一任务”。

#### 设置步骤详解：

1. **选择场景 (Select Scenario)**：
   - `Daily Life`: 包含餐厅、购物、问路等生存德语场景。
   - `Academic`: 包含课堂讨论、图书馆借书、联系教授等校园场景。
   - `Professional`: 包含面试、商务电话等职场场景。
2. **配置 AI 角色 (Configure AI Persona)**：
   - **Strictness (严格度)**：
     - `Low`: AI 作为一个友好的朋友，只鼓励表达，不纠正小错误（适合初学者建立自信）。
     - `High`: AI 作为一个严厉的考官，会打断对话并纠正每一个语法错误（适合考前突击）。
3. **设定目标 (Set Objectives)**：
   - 在输入框中填写任务目标，例如：“要求学生必须使用虚拟式二式 (Konjunktiv II) 表达礼貌请求”。
   - *此指令会直接通过 System Prompt 传递给 Gemini 模型。*
4. **发布 (Launch)**：
   - 点击发布后，学生端首页会出现红点提示，进入 `AISceneChat` 将直接加载该特定配置。

### 3.4 智能试卷生成 (Exam Generator) - 资源生产

**路径**：侧边栏 `Exam Generator`

利用 LLM (大语言模型) 瞬间生成练习题。

#### 参数配置指南：

- **Topic (主题)**：输入越具体越好。
  - ❌ 差：`Grammar`
  - ✅ 好：`Passive` voice in present tense and past tense (被动语态的现在时与过去时)
- **Difficulty (难度)**：
  - `A1`: 简单句，基础词汇 (Top 500)。
  - `B1`: 复合句，进阶词汇 (Top 2000)。
  - `C1`: 复杂从句，学术词汇，德语习语。
- **Question Types (题型)**：
  - `Multiple Choice`: 生成带 A/B/C/D 选项的题目。
  - `Fill` in` Blanks`: 生成挖空文本。
  - `Reading Comprehension`: 生成一篇短文 + 3个问答题。

## 4. 科研数据采集与导出（TODO）

针对 SITP 项目结题需求，系统提供了数据导出功能用于撰写报告。

1. **数据位置**：Dashboard 页面底部 -> `Admin Zone`。
2. **导出格式**：`.csv` (逗号分隔值文件)，可用 Excel 直接打开。
3. **包含字段**：
   - `Student_ID`: 学号（脱敏处理）
   - `Login_Frequency`: 登录频次
   - `Total_Interaction_Turns`: 总对话轮数
   - `Vocabulary_Score_Growth`: 词汇分进阶曲线（第1周 vs 第N周）
4. **用途建议**：
   - 制作“使用时长与期末成绩的相关性分析”散点图。
   - 对比“高频使用组”与“低频使用组”的口语流利度差异。

## 5. 故障排除与常见问题

| 现象                     | 可能原因                     | 解决方案                                                     |
| ------------------------ | ---------------------------- | ------------------------------------------------------------ |
| **生成试卷一直转圈**     | Google Gemini API 响应超时   | 1. 检查服务器网络是否能访问外网。2. 稍等片刻重试，减少题目数量（如从20题减为5题）。 |
| **仪表盘数据不更新**     | 浏览器缓存或后端定时任务延迟 | 尝试 `Ctrl + F5` 强制刷新页面。                              |
| **无法发布情景任务**     | 当前已有正在进行的任务       | 需要先点击“结束当前任务” (Archive Current Task) 才能发布新任务。 |
| **学生反映 AI 回复乱码** | 编码问题                     | 确保后端 `main.py` 文件头部已声明 UTF-8 编码，且数据库字符集正确。 |